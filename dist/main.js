(()=>{"use strict";var e={761:(e,r,o)=>{Object.defineProperty(r,"__esModule",{value:!0});const t=o(499),s=o(854),l=o(436),a=o(699);e.exports.loop=()=>{for(const e in Memory.creeps)Game.creeps[e]||(delete Memory.creeps[e],console.log("Clearing non-existing creep memory:",e));Object.values(Game.structures).forEach((e=>{if(e.structureType===STRUCTURE_TOWER){const r=e,o=r.pos.findClosestByRange(FIND_HOSTILE_CREEPS);if(o)return void r.attack(o);const t=r.pos.findClosestByRange(FIND_STRUCTURES,{filter:e=>e.hits<e.hitsMax});if(t)return void r.repair(t)}}));const e=Object.values(Game.creeps),r=e.filter((e=>e.memory.role===a.Role.HARVESTER)),o=Game.spawns.Spawn1;if(console.log("Harvesters: "+r.length),r.length<2){const e=`Harvester ${Game.time}`;console.log(`Spawning new harvester: ${e}`),o.spawnCreep([WORK,CARRY,MOVE],e,{memory:{role:a.Role.HARVESTER}})}if(o.spawning){const e=Game.creeps[o.spawning.name];o.room.visual.text(`🛠️ ${e.memory.role}`,o.pos.x+1,o.pos.y,{align:"left",opacity:.8})}for(const e in Game.rooms)console.log(`Room "${e}" has ${Game.rooms[e].energyAvailable} energy`);e.forEach((e=>{switch(String(e.memory.role)){case a.Role.HARVESTER:t.roleHarvester.run(e);break;case a.Role.UPGRADER:s.roleUpgrader.run(e);break;case a.Role.BUILDER:l.roleBuilder.run(e)}}))}},436:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.roleBuilder=void 0,r.roleBuilder={run:e=>{if(e.memory.building&&0==e.store[RESOURCE_ENERGY]&&(e.memory.building=!1,e.say("🔄 harvest")),e.memory.building||0!=e.store.getFreeCapacity()||(e.memory.building=!0,e.say("🚧 build")),e.memory.building){const r=e.room.find(FIND_CONSTRUCTION_SITES);r.length&&e.build(r[0])==ERR_NOT_IN_RANGE&&e.moveTo(r[0],{visualizePathStyle:{stroke:"#ffffff"}})}else{const r=e.room.find(FIND_SOURCES);e.harvest(r[0])==ERR_NOT_IN_RANGE&&e.moveTo(r[0],{visualizePathStyle:{stroke:"#ffaa00"}})}}}},499:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.roleHarvester=void 0,r.roleHarvester={run:function(e){if(e.store.getFreeCapacity()>0){const r=e.room.find(FIND_SOURCES);e.harvest(r[0])==ERR_NOT_IN_RANGE&&e.moveTo(r[0],{visualizePathStyle:{stroke:"#ffaa00"}})}else{const r=e.room.find(FIND_STRUCTURES,{filter:e=>(e.structureType==STRUCTURE_EXTENSION||e.structureType==STRUCTURE_SPAWN||e.structureType==STRUCTURE_TOWER)&&e.store.getFreeCapacity(RESOURCE_ENERGY)>0});r.length>0&&e.transfer(r[0],RESOURCE_ENERGY)==ERR_NOT_IN_RANGE&&e.moveTo(r[0],{visualizePathStyle:{stroke:"#ffffff"}})}}}},854:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.roleUpgrader=void 0,r.roleUpgrader={run:e=>{if(0==e.store[RESOURCE_ENERGY]){const r=e.room.find(FIND_SOURCES);e.harvest(r[0])==ERR_NOT_IN_RANGE&&e.moveTo(r[0])}else{if(!e.room.controller)return;e.upgradeController(e.room.controller)==ERR_NOT_IN_RANGE&&e.moveTo(e.room.controller)}}}},699:(e,r)=>{var o;Object.defineProperty(r,"__esModule",{value:!0}),r.Role=void 0,function(e){e.HARVESTER="harvester",e.UPGRADER="upgrader",e.BUILDER="builder"}(o||(r.Role=o={}))}},r={},o=function o(t){var s=r[t];if(void 0!==s)return s.exports;var l=r[t]={exports:{}};return e[t](l,l.exports,o),l.exports}(761);module.exports=o})();