(()=>{"use strict";var e={761:(e,o,r)=>{Object.defineProperty(o,"__esModule",{value:!0});const t=r(499),s=r(854),l=r(436);e.exports.loop=()=>{for(const e in Memory.creeps)Game.creeps[e]||(delete Memory.creeps[e],console.log("Clearing non-existing creep memory:",e));const e=Object.values(Game.creeps),o=e.filter((e=>e.memory.role===Role.HARVESTER)),r=Game.spawns.Spawn1;if(console.log("Harvesters: "+o.length),o.length<2){const e=`Harvester ${Game.time}`;console.log(`Spawning new harvester: ${e}`),r.spawnCreep([WORK,CARRY,MOVE],e,{memory:{role:Role.HARVESTER}})}if(r.spawning){const e=Game.creeps[r.spawning.name];r.room.visual.text(`🛠️ ${e.memory.role}`,r.pos.x+1,r.pos.y,{align:"left",opacity:.8})}for(const e in Game.rooms)console.log(`Room "${e}" has ${Game.rooms[e].energyAvailable} energy`);e.forEach((e=>{switch(e.memory.role){case Role.HARVESTER:t.roleHarvester.run(e);break;case Role.UPGRADER:s.roleUpgrader.run(e);break;case Role.BUILDER:l.roleBuilder.run(e)}}))}},436:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.roleBuilder=void 0,o.roleBuilder={run:e=>{if(e.memory.building&&0==e.store[RESOURCE_ENERGY]&&(e.memory.building=!1,e.say("🔄 harvest")),e.memory.building||0!=e.store.getFreeCapacity()||(e.memory.building=!0,e.say("🚧 build")),e.memory.building){const o=e.room.find(FIND_CONSTRUCTION_SITES);o.length&&e.build(o[0])==ERR_NOT_IN_RANGE&&e.moveTo(o[0],{visualizePathStyle:{stroke:"#ffffff"}})}else{const o=e.room.find(FIND_SOURCES);e.harvest(o[0])==ERR_NOT_IN_RANGE&&e.moveTo(o[0],{visualizePathStyle:{stroke:"#ffaa00"}})}}}},499:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.roleHarvester=void 0,o.roleHarvester={run:function(e){if(e.store.getFreeCapacity()>0){const o=e.room.find(FIND_SOURCES);e.harvest(o[0])==ERR_NOT_IN_RANGE&&e.moveTo(o[0],{visualizePathStyle:{stroke:"#ffaa00"}})}else{const o=e.room.find(FIND_STRUCTURES,{filter:e=>(e.structureType==STRUCTURE_EXTENSION||e.structureType==STRUCTURE_SPAWN)&&e.store.getFreeCapacity(RESOURCE_ENERGY)>0});o.length>0&&e.transfer(o[0],RESOURCE_ENERGY)==ERR_NOT_IN_RANGE&&e.moveTo(o[0],{visualizePathStyle:{stroke:"#ffffff"}})}}}},854:(e,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.roleUpgrader=void 0,o.roleUpgrader={run:e=>{if(0==e.store[RESOURCE_ENERGY]){const o=e.room.find(FIND_SOURCES);e.harvest(o[0])==ERR_NOT_IN_RANGE&&e.moveTo(o[0])}else{if(!e.room.controller)return;e.upgradeController(e.room.controller)==ERR_NOT_IN_RANGE&&e.moveTo(e.room.controller)}}}}},o={},r=function r(t){var s=o[t];if(void 0!==s)return s.exports;var l=o[t]={exports:{}};return e[t](l,l.exports,r),l.exports}(761);module.exports=r})();